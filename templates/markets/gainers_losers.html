{% extends 'base.html' %}

{% block title %}Today's Top Gainers & Losers — StockPro{% endblock %}

{% block page_content %}
<div class="space-y-8">
    <!-- Page Header -->
    <div class="flex items-center gap-3">
        <span class="size-10 rounded-xl bg-accent-teal/10 flex items-center justify-center">
            <span class="material-symbols-outlined text-accent-teal text-xl">trending_up</span>
        </span>
        <div>
            <h1 class="text-2xl font-extrabold text-text-main m-0">Today's Top Gainers & Losers</h1>
            <p class="text-sm text-text-muted m-0">Real-time market movers at a glance</p>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Top Gainers -->
        <div class="bg-surface rounded-2xl shadow-soft overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-100 flex items-center gap-2">
                <span class="material-symbols-outlined text-green-500">arrow_upward</span>
                <h2 class="text-lg font-bold text-text-main m-0">Top 10 Gainers</h2>
            </div>
            <div class="divide-y divide-gray-50">
                {% for stock in top_gainers %}
                <div class="flex items-center justify-between px-6 py-4 hover:bg-gray-50/50 transition-colors">
                    <div class="flex items-center gap-4">
                        <div class="size-10 rounded-xl bg-green-50 flex items-center justify-center text-green-600 font-bold text-sm">
                            {{ forloop.counter }}
                        </div>
                        <div>
                            <p class="font-bold text-text-main text-sm m-0">{{ stock.symbol|default:stock.name }}</p>
                            <p class="text-xs text-text-muted m-0">{{ stock.sector|default:"Equity" }}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-bold text-text-main text-sm m-0">₹{{ stock.price|default:stock.ltp|floatformat:2 }}</p>
                        <p class="text-xs font-semibold text-green-500 m-0">+{{ stock.change_pct|default:stock.pct_change|floatformat:2 }}%</p>
                    </div>
                </div>
                {% empty %}
                <div class="px-6 py-12 text-center text-text-muted text-sm">
                    <span class="material-symbols-outlined text-4xl text-gray-300 mb-2 block">bar_chart</span>
                    Market data will appear here during trading hours
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Top Losers -->
        <div class="bg-surface rounded-2xl shadow-soft overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-100 flex items-center gap-2">
                <span class="material-symbols-outlined text-red-500">arrow_downward</span>
                <h2 class="text-lg font-bold text-text-main m-0">Top 10 Losers</h2>
            </div>
            <div class="divide-y divide-gray-50">
                {% for stock in top_losers %}
                <div class="flex items-center justify-between px-6 py-4 hover:bg-gray-50/50 transition-colors">
                    <div class="flex items-center gap-4">
                        <div class="size-10 rounded-xl bg-red-50 flex items-center justify-center text-red-500 font-bold text-sm">
                            {{ forloop.counter }}
                        </div>
                        <div>
                            <p class="font-bold text-text-main text-sm m-0">{{ stock.symbol|default:stock.name }}</p>
                            <p class="text-xs text-text-muted m-0">{{ stock.sector|default:"Equity" }}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-bold text-text-main text-sm m-0">₹{{ stock.price|default:stock.ltp|floatformat:2 }}</p>
                        <p class="text-xs font-semibold text-red-500 m-0">{{ stock.change_pct|default:stock.pct_change|floatformat:2 }}%</p>
                    </div>
                </div>
                {% empty %}
                <div class="px-6 py-12 text-center text-text-muted text-sm">
                    <span class="material-symbols-outlined text-4xl text-gray-300 mb-2 block">bar_chart</span>
                    Market data will appear here during trading hours
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
